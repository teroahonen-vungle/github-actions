name: Create release
on:
  release:
    types: [published]
permissions:
  id-token: write
  contents: write
  packages: write
  pull-requests: read
env:
  BASE_DIR: _ops/charts
  SERVICE: slydell
jobs:
  init:
    runs-on: ubuntu-latest
    outputs:
      version: ${{ steps.version.outputs.version }}
    steps:
      - name: Checkout Code
        uses: actions/checkout@v4
      - name: Get version
        id: version
        run: |
          echo "release=$(echo ${{ github.ref }} | cut -d/ -f3)"
          echo "version=$(echo $release | awk -F '[-]' '{print $2}')"
          echo "subject=$(echo $release | awk -F '[-]' '{print $1}')"
