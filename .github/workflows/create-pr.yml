name: PR Creation
on:
  push:
    branches:
      - "action-test"
env:
  ticket_transition: true
  service: jaeger
  version: v1.257.0
  ticket: DEPLOY-1234
jobs:
  one:
    runs-on: ubuntu-latest
    steps:
      - name: Transistion ticket if true
        if: ${{ env.ticket_transition == 'true'}}
        run: echo "Change ticket status"
      - name: Checkout code
        uses: actions/checkout@v3
      - name: Create Pull Request
        id: pr
        uses: peter-evans/create-pull-request@v4
        with:
          token: ${{secrets.GH_TOKEN}}
          committer: GitHub <noreply@github.com>
          author: ${{ github.actor }} <${{ github.actor }}@users.noreply.github.com>
          branch: main
          title: ${{ env.service }} release ${{ env.version}}}
          body: |
            Deploy ticket: ${{ env.ticket }} 
            Service: ${{ env.service }} 
            Version: ${{ env.version}}}
          labels: |
            ${{ env.service }}
            deployment
          delete-branch: true

        